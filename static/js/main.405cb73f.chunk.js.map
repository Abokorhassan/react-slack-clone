{"version":3,"sources":["components/UserList/index.module.css","components/MessageList/index.module.css","components/Message/index.module.css","components/FileInput/index.module.css","components/UserHeader/index.module.css","components/CreateMessageForm/index.module.css","components/RoomList/index.module.css","components/RoomHeader/index.module.css","components/CreateRoomForm/index.module.css","components/WelcomeScreen/index.module.css","components/JoinRoomScreen/index.module.css","components/TypingIndicator/index.module.css","components/UserHeader/index.js","components/UserList/index.js","components/Message/index.js","components/MessageList/index.js","components/TypingIndicator/index.js","components/FileInput/index.js","components/CreateMessageForm/index.js","components/RoomList/index.js","components/RoomHeader/index.js","components/CreateRoomForm/index.js","components/WelcomeScreen/index.js","components/JoinRoomScreen/index.js","chatkit.js","index.js"],"names":["module","exports","component","hint","online","empty","container","pulse","dots","ball-beat","UserHeader","_ref","_ref$user","user","react_default","a","createElement","className","style","src","avatarURL","alt","name","id","concat","UserList","room","createConvo","current","removeUser","users","map","key","presence","state","onClick","e","order","length","Attachment","this","props","link","setState","image","controls","video","audio","file","href","download","type","React","Component","Message","message","sender","string","createdAt","date","Date","minutes","getMinutes","getHours","Linkify_default","properties","target","text","attachment","Message_Attachment","emptyList","role","aria-label","MessageList","_ref$messages","messages","Object","keys","reverse","k","x","TypingIndicator","_ref$typing","typing","slice","join","FileInput","_ref$state","xlinkHref","onChange","files","sendMessage","roomId","replace","CreateMessageForm","_ref$state$user","_ref$state$room","_ref$state$message","runCommand","actions","onSubmit","preventDefault","value","trim","startsWith","placeholder","onInput","isTypingIn","FileInput_FileInput","unreads","arguments","undefined","read","readCursor","filter","position","RoomList","_ref$rooms","rooms","messageKeys","latestMessage","pop","firstUser","find","unreadMessages","lastMessage","parseInt","priority","unreadCount","disabled","joinRoom","match","isPrivate","RoomHeader","sidebarOpen","userListOpen","_ref$actions","setSidebar","setUserList","CreateRoomForm","submit","private","elements","checked","required","WelcomeScreen","viewBox","d","JoinRoomScreen","instanceLocator","url","token","src_chatkit","_ref2","Chatkit","ChatManager","tokenProvider","TokenProvider","userId","connect","onUserStartedTyping","isTyping","onUserStoppedTyping","notTyping","onAddedToRoom","subscribeToRoom","onRemovedFromRoom","removeRoom","onPresenceChanged","setUserPresence","then","Promise","all","hooks","onMessage","addMessage","setUser","catch","error","console","log","View","window","innerWidth","_this","setRoom","scrollToEnd","setCursor","roomSubscriptions","createRoom","options","exists","addUserIds","addUserToRoom","_ref$roomId","removeUserFromRoom","_ref2$roomId","leaveRoom","setReadCursor","forceUpdate","payload","messageId","prevState","objectSpread","defineProperty","showNotification","command","commands","invite","_ref3","slicedToArray","remove","_ref5","leave","_ref7","split","args","exec","setTimeout","elem","document","querySelector","scrollTop","senderId","visibilityState","Notification","body","icon","addEventListener","focus","_this2","requestPermission","existingUser","JSON","parse","fetch","method","stringify","code","authCode","res","json","version","localStorage","setItem","history","replaceState","location","pathname","_this$state","_this$actions","data-open","UserHeader_UserHeader","RoomList_RoomList","CreateRoomForm_CreateRoomForm","RoomHeader_RoomHeader","MessageList_MessageList","TypingIndicator_TypingIndicator","CreateMessageForm_CreateMessageForm","UserList_UserList","JoinRoomScreen_JoinRoomScreen","WelcomeScreen_WelcomeScreen","getItem","clear","redirect","URLSearchParams","search","get","ReactDOM","render","src_View"],"mappings":"4EACAA,EAAAC,QAAA,CAAkBC,UAAA,4BAAAC,KAAA,uBAAAC,OAAA,oFCAlBJ,EAAAC,QAAA,CAAkBC,UAAA,+BAAAG,MAAA,gDCAlBL,EAAAC,QAAA,CAAkBC,UAAA,2BAAAE,OAAA,6CCAlBJ,EAAAC,QAAA,CAAkBK,UAAA,6BAAAJ,UAAA,kDCAlBF,EAAAC,QAAA,CAAkBC,UAAA,8BAAAK,MAAA,+CCAlBP,EAAAC,QAAA,CAAkBC,UAAA,0DCAlBF,EAAAC,QAAA,CAAkBC,UAAA,iDCAlBF,EAAAC,QAAA,CAAkBC,UAAA,mDCAlBF,EAAAC,QAAA,CAAkBC,UAAA,uDCAlBF,EAAAC,QAAA,CAAkBC,UAAA,iCAAAK,MAAA,kDCAlBP,EAAAC,QAAA,CAAkBC,UAAA,kCAAAK,MAAA,sFCAlBP,EAAAC,QAAA,CAAkBC,UAAA,mCAAAM,KAAA,8BAAAC,YAAA,iOCKLC,EAAa,SAAAC,GAAA,IAAAC,EAAAD,EAAGE,YAAH,IAAAD,EAAU,GAAVA,EAAA,OACxBE,EAAAC,EAAAC,cAAA,UAAQC,UAAWC,IAAMhB,WACvBY,EAAAC,EAAAC,cAAA,OAAKG,IAAKN,EAAKO,WAJjB,iFAI2CC,IAAKR,EAAKS,OACnDR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAKH,EAAKS,MACVR,EAAAC,EAAAC,cAAA,UAAKH,EAAKU,IAAL,IAAAC,OAAeX,EAAKU,yBCRlBE,EAAW,SAAAd,GAAA,IAAGe,EAAHf,EAAGe,KAAeC,GAAlBhB,EAASiB,QAATjB,EAAkBgB,aAAlBhB,EAA+BkB,WAA/B,OACtBf,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAMhB,WAClBwB,EAAKI,MAAMC,IAAI,SAAAlB,GAAI,OAClBC,EAAAC,EAAAC,cAAA,MACEgB,IAAKnB,EAAKU,GACVN,UAAmC,WAAxBJ,EAAKoB,SAASC,MAAqBhB,IAAMd,OAAS,KAC7D+B,QAAS,SAAAC,GAAC,OAAIT,EAAY,CAAEd,UAC5BK,MAAO,CAAEmB,MAA+B,WAAxBxB,EAAKoB,SAASC,QAAuB,IAErDpB,EAAAC,EAAAC,cAAA,OAAKG,IAAKN,EAAKO,UAAWC,IAAKR,EAAKS,OACpCR,EAAAC,EAAAC,cAAA,SAAIH,EAAKS,SAIXI,EAAKI,MAAMQ,OAAS,EAClBxB,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAMf,MACnBW,EAAAC,EAAAC,cAAA,mBACOF,EAAAC,EAAAC,cAAA,kCADP,eAIA,0DCbJuB,8LAEEC,KAAKC,MAAMC,MAAMF,KAAKG,SAAS,CAAExB,IAAKqB,KAAKC,MAAMC,wCAGrD,OAAOF,KAAKN,MACR,CACEU,MACE9B,EAAAC,EAAAC,cAAA,OAAK6B,UAAU,EAAM1B,IAAKqB,KAAKN,MAAMf,IAAKE,IAAKmB,KAAKN,MAAMZ,OAE5DwB,MAAOhC,EAAAC,EAAAC,cAAA,SAAO6B,UAAU,EAAM1B,IAAKqB,KAAKN,MAAMf,MAC9C4B,MAAOjC,EAAAC,EAAAC,cAAA,SAAO6B,UAAU,EAAM1B,IAAKqB,KAAKN,MAAMf,MAC9C6B,KACElC,EAAAC,EAAAC,cAAA,KAAGiC,KAAMT,KAAKN,MAAMf,IAAK+B,UAAQ,GAAjC,kBAIFV,KAAKC,MAAMU,MACb,YAlBiBC,IAAMC,WAsBlBC,EAAU,SAAA3C,GAAA,IAAGE,EAAHF,EAAGE,KAAMc,EAAThB,EAASgB,YAAT,OAA2B,SAAA4B,GAAO,OACvDA,EAAQC,OACN1C,EAAAC,EAAAC,cAAA,MAAIgB,IAAKuB,EAAQhC,GAAIN,UAAWC,IAAMhB,WACpCY,EAAAC,EAAAC,cAAA,OACEmB,QAAS,SAAAC,GAAC,OAAIT,EAAY,CAAEd,KAAM0C,EAAQC,UAC1CrC,IAAKoC,EAAQC,OAAOpC,UACpBC,IAAKkC,EAAQC,OAAOlC,OAEtBR,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,QACEC,UACEsC,EAAQC,OAAOjC,KAAOV,EAAKU,IAC1BgC,EAAQC,OAAOvB,UACoB,WAAlCsB,EAAQC,OAAOvB,SAASC,MACtBhB,IAAMd,OACN,MANR,GAAAoB,OAQK+B,EAAQC,OAAOlC,KARpB,OAAAE,QArCKiC,EA6C8BF,EAAQG,UA5C3CC,EAAO,IAAIC,KAAKH,GAChBI,EAAUF,EAAKG,aACrB,GAAAtC,OAAUmC,EAAKI,WAAf,KAAAvC,OAA6BqC,EAAU,GAAK,IAAMA,EAAUA,MA2CtD/C,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAACgD,EAAAjD,EAAD,CAASkD,WAAY,CAAEC,OAAQ,WAAaX,EAAQY,OAErDZ,EAAQa,WACPtD,EAAAC,EAAAC,cAACqD,EAAD,CACExD,KAAMA,EACN6B,KAAMa,EAAQa,WAAW1B,KACzBS,KAAMI,EAAQa,WAAWjB,OAEzB,OAGN,KA1DO,IAAAM,EACLE,EACAE,ICFFS,EACJxD,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMb,OACpBS,EAAAC,EAAAC,cAAA,QAAMuD,KAAK,MAAMC,aAAW,QAA5B,gBAGA1D,EAAAC,EAAAC,cAAA,6BACAF,EAAAC,EAAAC,cAAA,kFAISyD,EAAc,SAAA9D,GAAA,IAAA+D,EAAA/D,EAAGgE,gBAAH,IAAAD,EAAc,GAAdA,EAAkB7D,EAAlBF,EAAkBE,KAAMc,EAAxBhB,EAAwBgB,YAAxB,OACzBb,EAAAC,EAAAC,cAAA,MAAIO,GAAG,WAAWN,UAAWC,IAAMhB,WAChC0E,OAAOC,KAAKF,GAAUrC,OAAS,EAC9BxB,EAAAC,EAAAC,cAAA,gBACG4D,OAAOC,KAAKF,GACVG,UACA/C,IAAI,SAAAgD,GAAC,OAAIzB,EAAQ,CAAEzC,OAAMc,eAAhB2B,CAA+BqB,EAASI,OAGtDT,oBCpBA9D,EACJM,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMV,MACnB,CAAC,EAAG,EAAG,GAAGuB,IAAI,SAAAiD,GAAC,OACdlE,EAAAC,EAAAC,cAAA,OAAKgB,IAAKgD,OAKHC,EAAkB,SAAAtE,GAAA,IAAAuE,EAAAvE,EAAGwE,cAAH,IAAAD,EAAY,GAAZA,EAAA,OAC7BN,OAAOC,KAAKM,GAAQ7C,OAClBxB,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMhB,WACpBY,EAAAC,EAAAC,cAAA,WAAMR,GACNM,EAAAC,EAAAC,cAAA,cAAAQ,OAASoD,OAAOC,KAAKM,GAClBC,MAAM,EAAG,GACTC,KAAK,SAFR,gBAIA,wCChBOC,EAAY,SAAA3E,GAAA,IAAA4E,EAAA5E,EAAGuB,MAASrB,EAAZ0E,EAAY1E,KAAM0C,EAAlBgC,EAAkBhC,QAAS7B,EAA3B6D,EAA2B7D,KAA3B,OACvBA,EAAKH,GACHT,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMZ,WACpBQ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,sBAEjB1E,EAAAC,EAAAC,cAAA,SACEC,UAAWC,IAAMhB,UACjBiD,KAAK,OACLsC,SAAU,SAAArD,GACR,IAAMY,EAAOZ,EAAE8B,OAAOwB,MAAM,GAC5B1C,GACEnC,EAAK8E,YAAY,CACfxB,KAAMZ,GAAWP,EAAK1B,KACtBsE,OAAQlE,EAAKH,GACb6C,WAAY,CACV9C,KAAM0B,EAAK1B,KAAKuE,QAAQ,mBAAoB,MAC5C7C,cAMV,MCtBO8C,EAAoB,SAAAnF,GAAA,IAAA4E,EAAA5E,EAC/BuB,MAD+B6D,EAAAR,EACtB1E,YADsB,IAAAkF,EACf,GADeA,EAAAC,EAAAT,EACX7D,YADW,IAAAsE,EACJ,GADIA,EAAAC,EAAAV,EACAhC,eADA,IAAA0C,EACU,GADVA,EAEpBC,EAFoBvF,EAE/BwF,QAAWD,WAFoB,OAI/BxE,EAAKH,GACHT,EAAAC,EAAAC,cAAA,QACEC,UAAWC,IAAMhB,UACjBkG,SAAU,SAAAhE,GACRA,EAAEiE,iBAEF,IAAM9C,EAAUnB,EAAE8B,OAAO,GAAGoC,MAAMC,OAEX,IAAnBhD,EAAQjB,SAIZF,EAAE8B,OAAO,GAAGoC,MAAQ,GAEpB/C,EAAQiD,WAAW,KACfN,EAAW3C,EAAQ6B,MAAM,IACzBvE,EAAK8E,YAAY,CACfxB,KAAMZ,EACNqC,OAAQlE,EAAKH,QAIrBT,EAAAC,EAAAC,cAAA,SACEyF,YAAY,mBACZC,QAAS,SAAAtE,GAAC,OAAIvB,EAAK8F,WAAW,CAAEf,OAAQlE,EAAKH,QAE/CT,EAAAC,EAAAC,cAAC4F,EAAD,CAAW1E,MAAO,CAAErB,OAAMa,OAAM6B,aAChCzC,EAAAC,EAAAC,cAAA,UAAQmC,KAAK,UACXrC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,sBAInB,uBC/BAqB,EAAU,SAAChG,EAAMa,GAAwB,IAAlBiD,EAAkBmC,UAAAxE,OAAA,QAAAyE,IAAAD,UAAA,GAAAA,UAAA,GAAP,GAChCE,EAAOnG,EAAKoG,WAAW,CAAErB,OAAQlE,EAAKH,KAC5C,OACGyF,GAAQpC,OAAOC,KAAKF,GAAUuC,OAAO,SAAAlC,GAAC,OAAIA,EAAIgC,EAAKG,WAAU7E,aAC9DyE,GAUSK,EAAW,SAAAzG,GAAA,IAAA0G,EAAA1G,EACtB2G,aADsB,IAAAD,EACd,GADcA,EAEtBxG,EAFsBF,EAEtBE,KACA8D,EAHsBhE,EAGtBgE,SACA/C,EAJsBjB,EAItBiB,QACAuD,EALsBxE,EAKtBwE,OACAgB,EANsBxF,EAMtBwF,QANsB,OAQtBrF,EAAAC,EAAAC,cAAA,MAAIC,UAAWC,IAAMhB,WAClBoH,EAAMvF,IAAI,SAAAL,GACT,IA9BOH,EA8BDgG,EAAc3C,OAAOC,KAAKF,EAASjD,EAAKH,KAAO,IAC/CiG,EACJD,EAAYjF,OAAS,GAAKqC,EAASjD,EAAKH,IAAIgG,EAAYE,OACpDC,EAAYhG,EAAKI,MAAM6F,KAAK,SAAA3C,GAAC,OAAIA,EAAEzD,KAAOV,EAAKU,KAC/Cc,EApBK,SAACxB,EAAMa,GAAwB,IAAlBiD,EAAkBmC,UAAAxE,OAAA,QAAAyE,IAAAD,UAAA,GAAAA,UAAA,GAAP,GACjCc,EAAiBf,EAAQhG,EAAMa,EAAMiD,IAAa,EAClDkD,EAAcjD,OAAOC,KAAKF,GAAU8C,OAAS,EACnD,OAAwD,GAAhD,GAAKG,EAAiBE,SAASD,IAiBrBE,CAASlH,EAAMa,EAAMiD,EAASjD,EAAKH,KAC3CyG,EAAcnB,EAAQhG,EAAMa,EAAMiD,EAASjD,EAAKH,KACtD,OACET,EAAAC,EAAAC,cAAA,MACEgB,IAAKN,EAAKH,GACV0G,SAAUvG,EAAKH,KAAOK,EAAQL,GAC9BY,QAAS,SAAAC,GAAC,OAAI+D,EAAQ+B,SAASxG,IAC/BR,MAAO,CAAEmB,UAERX,EAAKJ,KAAK6G,MAAMtH,EAAKU,KAAOmG,EAC3B5G,EAAAC,EAAAC,cAAA,OAAKG,IAAKuG,EAAUtG,UAAWC,IAAKqG,EAAUnG,MA5C7CA,EA8CIG,EAAK0G,UAAY,OAAS,SA7CzCtH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAS,aAAAhE,OAAeD,OA8CvBT,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,SAAIU,EAAKJ,KAAKuE,QAAQhF,EAAKU,GAAI,KAC/BT,EAAAC,EAAAC,cAAA,YAAOwG,GAAiBA,EAAcrD,OAEvCzC,EAAKH,KAAOK,EAAQL,IAAMyG,EACzBlH,EAAAC,EAAAC,cAAA,aAAQgH,GACNpD,OAAOC,KAAKM,EAAOzD,EAAKH,KAAO,IAAIe,OAAS,EAC9CxB,EAAAC,EAAAC,cAAA,OAAKC,UAAWT,QACb,CAAC,EAAG,EAAG,GAAGuB,IAAI,SAAAiD,GAAC,OACdlE,EAAAC,EAAAC,cAAA,OAAKgB,IAAKgD,OAGZ,2BC7DDqD,EAAa,SAAA1H,GAAA,IAAA4E,EAAA5E,EACxBuB,MAASR,EADe6D,EACf7D,KAAMb,EADS0E,EACT1E,KAAMyH,EADG/C,EACH+C,YAAaC,EADVhD,EACUgD,aADVC,EAAA7H,EAExBwF,QAAWsC,EAFaD,EAEbC,WAAYC,EAFCF,EAEDE,YAFC,OAIxB5H,EAAAC,EAAAC,cAAA,UAAQC,UAAWC,IAAMhB,WACvBY,EAAAC,EAAAC,cAAA,UAAQmB,QAAS,SAAAC,GAAC,OAAIqG,GAAYH,KAChCxH,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,qBAGnB1E,EAAAC,EAAAC,cAAA,UAAKU,EAAKJ,MAAQI,EAAKJ,KAAKuE,QAAQhF,EAAKU,GAAI,KAC5CG,EAAKI,OACJhB,EAAAC,EAAAC,cAAA,OAAKmB,QAAS,SAAAC,GAAC,OAAIsG,GAAaH,KAC9BzH,EAAAC,EAAAC,cAAA,YAAOU,EAAKI,MAAMQ,QAClBxB,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,2CCfZmD,EAAiB,SAAAhI,GAAA,IAAGiI,EAAHjI,EAAGiI,OAAH,OAC5B9H,EAAAC,EAAAC,cAAA,QACEC,UAAWC,IAAMhB,UACjBkG,SAAU,SAAAhE,GACRA,EAAEiE,iBACFuC,EAAO,CACLtH,KAAMc,EAAE8B,OAAO,GAAGoC,MAClBuC,QAASzG,EAAE8B,OAAO4E,SAAS,GAAGC,UAEhC3G,EAAE8B,OAAO,GAAGoC,MAAQ,KAGtBxF,EAAAC,EAAAC,cAAA,SAAOyF,YAAY,gBAAgBtD,KAAK,OAAO6F,UAAQ,IACvDlI,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAAA,SAAOmC,KAAK,aACZrC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,qBAGnB1E,EAAAC,EAAAC,cAAA,UAAQmC,KAAK,UACXrC,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKwE,UAAU,uCCrBVyD,GAAgB,kBAC3BnI,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,IAAMhB,WACpBY,EAAAC,EAAAC,cAAA,QAAMuD,KAAK,MAAMC,aAAW,QAC1B1D,EAAAC,EAAAC,cAAA,OAAKkI,QAAQ,aACXpI,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAMmI,EAAE,ouBACRrI,EAAAC,EAAAC,cAAA,QAAMmI,EAAE,uRACRrI,EAAAC,EAAAC,cAAA,QAAMmI,EAAE,sKAIdrI,EAAAC,EAAAC,cAAA,gDAEEF,EAAAC,EAAAC,cAAA,WAFF,iDCZOoI,GAAiB,kBAC5BtI,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAA,OAAKC,UAAWC,KAAMhB,WACpBY,EAAAC,EAAAC,cAAA,QAAMuD,KAAK,MAAMC,aAAW,QAC1B1D,EAAAC,EAAAC,cAAA,OAAKkI,QAAQ,aACXpI,EAAAC,EAAAC,cAAA,SACEF,EAAAC,EAAAC,cAAA,QAAMmI,EAAE,ouBACRrI,EAAAC,EAAAC,cAAA,QAAMmI,EAAE,uRACRrI,EAAAC,EAAAC,cAAA,QAAMmI,EAAE,sKAIdrI,EAAAC,EAAAC,cAAA,kHCPEqI,GAHW,8CAGMC,GALlB,SAAC/H,EAAIgI,GAAL,8DAAA/H,OACqDD,EADrD,WAAAC,OACiE+H,IAKzDC,GAAA,SAAA7I,EAAA8I,GAAA9I,EAAGuB,MAAH,IAAUiE,EAAVxF,EAAUwF,QAAa5E,EAAvBkI,EAAuBlI,GAAIgI,EAA3BE,EAA2BF,MAA3B,OACb,IAAIG,KAAQC,YAAY,CACtBC,cAAe,IAAIF,KAAQG,cAAc,CAAEP,IAAKA,GAAI/H,EAAIgI,KACxDF,mBACAS,OAAQvI,IAEPwI,QAAQ,CACPC,oBAAqB7D,EAAQ8D,SAC7BC,oBAAqB/D,EAAQgE,UAC7BC,cAAejE,EAAQkE,gBACvBC,kBAAmBnE,EAAQoE,WAC3BC,kBAAmBrE,EAAQsE,kBAE5BC,KAAK,SAAA7J,GAEJ8J,QAAQC,IACN/J,EAAKyG,MAAMvF,IAAI,SAAAL,GAAI,OACjBb,EAAKwJ,gBAAgB,CACnBzE,OAAQlE,EAAKH,GACbsJ,MAAO,CAAEC,UAAW3E,EAAQ4E,iBAGhCL,KAAK,SAAApD,GACLnB,EAAQ6E,QAAQnK,GAEhBA,EAAKyG,MAAMhF,OAAS,GAAK6D,EAAQ+B,SAASrH,EAAKyG,MAAM,QAGxD2D,MAAM,SAAAC,GAAK,OAAIC,QAAQC,IAAI,sBAAuBF,MCfjDG,8MACJnJ,MAAQ,CACNrB,KAAM,GACNa,KAAM,GACNiD,SAAU,GACVQ,OAAQ,GACRmD,aAAa,EACbC,aAAc+C,OAAOC,WAAa,OAGpCpF,QAAU,CAKRsC,WAAY,SAAAH,GAAW,OAAIkD,EAAK7I,SAAS,CAAE2F,iBAC3CI,YAAa,SAAAH,GAAY,OAAIiD,EAAK7I,SAAS,CAAE4F,kBAM7CyC,QAAS,SAAAnK,GAAI,OAAI2K,EAAK7I,SAAS,CAAE9B,UAMjC4K,QAAS,SAAA/J,GACP8J,EAAK7I,SAAS,CAAEjB,OAAM4G,aAAa,IACnCkD,EAAKrF,QAAQuF,eAGfnB,WAAY,SAAA7I,GAAI,OAAI8J,EAAK7I,SAAS,CAAEjB,KAAM,MAE1CwG,SAAU,SAAAxG,GACR8J,EAAKrF,QAAQsF,QAAQ/J,GACrB8J,EAAKrF,QAAQkE,gBAAgB3I,GAC7B8J,EAAKtJ,MAAMyC,SAASjD,EAAKH,KACvBiK,EAAKrF,QAAQwF,UACXjK,EAAKH,GACLqD,OAAOC,KAAK2G,EAAKtJ,MAAMyC,SAASjD,EAAKH,KAAKkG,QAIhD4C,gBAAiB,SAAA3I,GAAI,OAClB8J,EAAKtJ,MAAMrB,KAAK+K,kBAAkBlK,EAAKH,KACxCiK,EAAKtJ,MAAMrB,KAAKwJ,gBAAgB,CAC9BzE,OAAQlE,EAAKH,GACbsJ,MAAO,CAAEC,UAAWU,EAAKrF,QAAQ4E,eAGrCc,WAAY,SAAAC,GAAO,OACjBN,EAAKtJ,MAAMrB,KAAKgL,WAAWC,GAASpB,KAAKc,EAAKrF,QAAQ+B,WAExDvG,YAAa,SAAAmK,GACX,GAAIA,EAAQjL,KAAKU,KAAOiK,EAAKtJ,MAAMrB,KAAKU,GAAI,CAC1C,IAAMwK,EAASP,EAAKtJ,MAAMrB,KAAKyG,MAAMK,KACnC,SAAA3C,GAAC,OACCA,EAAE1D,OAASwK,EAAQjL,KAAKU,GAAKiK,EAAKtJ,MAAMrB,KAAKU,IAC7CyD,EAAE1D,OAASkK,EAAKtJ,MAAMrB,KAAKU,GAAKuK,EAAQjL,KAAKU,KAEjDwK,EACIP,EAAKrF,QAAQ+B,SAAS6D,GACtBP,EAAKrF,QAAQ0F,WAAW,CACtBvK,KAAMkK,EAAKtJ,MAAMrB,KAAKU,GAAKuK,EAAQjL,KAAKU,GACxCyK,WAAY,CAACF,EAAQjL,KAAKU,IAC1BsH,SAAS,MAKnBoD,cAAe,SAAAtL,GAAA,IAAGmJ,EAAHnJ,EAAGmJ,OAAHoC,EAAAvL,EAAWiF,cAAX,IAAAsG,EAAoBV,EAAKtJ,MAAMR,KAAKH,GAApC2K,EAAA,OACbV,EAAKtJ,MAAMrB,KACRoL,cAAc,CAAEnC,SAAQlE,WACxB8E,KAAKc,EAAKrF,QAAQsF,UAEvBU,mBAAoB,SAAA1C,GAAA,IAAGK,EAAHL,EAAGK,OAAHsC,EAAA3C,EAAW7D,cAAX,IAAAwG,EAAoBZ,EAAKtJ,MAAMR,KAAKH,GAApC6K,EAAA,OAClBtC,IAAW0B,EAAKtJ,MAAMrB,KAAKU,GACvBiK,EAAKtJ,MAAMrB,KAAKwL,UAAU,CAAEzG,WAC5B4F,EAAKtJ,MAAMrB,KACRsL,mBAAmB,CAAErC,SAAQlE,WAC7B8E,KAAKc,EAAKrF,QAAQsF,UAM3BE,UAAW,SAAC/F,EAAQuB,GAAT,OACTqE,EAAKtJ,MAAMrB,KACRyL,cAAc,CAAE1G,SAAQuB,SAAUW,SAASX,KAC3CuD,KAAK,SAAA1F,GAAC,OAAIwG,EAAKe,iBAMpBxB,WAAY,SAAAyB,GACV,IAAM5G,EAAS4G,EAAQ9K,KAAKH,GACtBkL,EAAYD,EAAQjL,IAE1BiK,EAAK7I,SAAS,SAAA+J,GAAS,MAAK,CAC1B/H,SAASC,OAAA+H,EAAA,EAAA/H,CAAA,GACJ8H,EAAU/H,SADPC,OAAAgI,EAAA,EAAAhI,CAAA,GAELgB,EAFKhB,OAAA+H,EAAA,EAAA/H,CAAA,GAGD8H,EAAU/H,SAASiB,GAHlBhB,OAAAgI,EAAA,EAAAhI,CAAA,GAIH6H,EAAYD,SAKf5G,IAAW4F,EAAKtJ,MAAMR,KAAKH,QACdiK,EAAKtJ,MAAMrB,KAAKoG,WAAW,CAAErB,YAAa,IAC3BuB,UAAY,GACzBsF,GAAajB,EAAKrF,QAAQwF,UAAU/F,EAAQ6G,GAC7DjB,EAAKrF,QAAQuF,eAGfF,EAAKrF,QAAQ0G,iBAAiBL,IAGhCtG,WAAY,SAAA4G,GACV,IAAMC,EAAW,CACfC,OAAQ,SAAAC,GAAA,IAAEnD,EAAFlF,OAAAsI,EAAA,EAAAtI,CAAAqI,EAAA,aAAczB,EAAKrF,QAAQ8F,cAAc,CAAEnC,YACnDqD,OAAQ,SAAAC,GAAA,IAAEtD,EAAFlF,OAAAsI,EAAA,EAAAtI,CAAAwI,EAAA,aAAc5B,EAAKrF,QAAQgG,mBAAmB,CAAErC,YACxDuD,MAAO,SAAAC,GAAA1I,OAAAsI,EAAA,EAAAtI,CAAA0I,EAAA,aACL9B,EAAKrF,QAAQgG,mBAAmB,CAAErC,OAAQ0B,EAAKtJ,MAAMrB,KAAKU,OAExDD,EAAOwL,EAAQS,MAAM,KAAK,GAC1BC,EAAOV,EAAQS,MAAM,KAAKnI,MAAM,GAChCqI,EAAOV,EAASzL,GACtBmM,GAAQA,EAAKD,GAAMvC,MAAME,QAAQC,MAGnCM,YAAa,SAAAtJ,GAAC,OACZsL,WAAW,WACT,IAAMC,EAAOC,SAASC,cAAc,aACpCF,IAASA,EAAKG,UAAY,MACzB,IAML7D,SAAU,SAACvI,EAAMb,GAAP,OACR2K,EAAK7I,SAAS,SAAA+J,GAAS,MAAK,CAC1BvH,OAAOP,OAAA+H,EAAA,EAAA/H,CAAA,GACF8H,EAAUvH,OADTP,OAAAgI,EAAA,EAAAhI,CAAA,GAEHlD,EAAKH,GAFFqD,OAAA+H,EAAA,EAAA/H,CAAA,GAGC8H,EAAUvH,OAAOzD,EAAKH,IAHvBqD,OAAAgI,EAAA,EAAAhI,CAAA,GAID/D,EAAKU,IAAK,UAKnB4I,UAAW,SAACzI,EAAMb,GAAP,OACT2K,EAAK7I,SAAS,SAAA+J,GAAS,MAAK,CAC1BvH,OAAOP,OAAA+H,EAAA,EAAA/H,CAAA,GACF8H,EAAUvH,OADTP,OAAAgI,EAAA,EAAAhI,CAAA,GAEHlD,EAAKH,GAFFqD,OAAA+H,EAAA,EAAA/H,CAAA,GAGC8H,EAAUvH,OAAOzD,EAAKH,IAHvBqD,OAAAgI,EAAA,EAAAhI,CAAA,GAID/D,EAAKU,IAAK,UASnBkJ,gBAAiB,kBAAMe,EAAKe,eAM5BM,iBAAkB,SAAAtJ,GAEd,iBAAkB+H,QAClBE,EAAKtJ,MAAMrB,KAAKU,IAChBiK,EAAKtJ,MAAMrB,KAAKU,KAAOgC,EAAQwK,UACF,WAA7BH,SAASI,iBAEY,IAAIC,aAAJ,oBAAAzM,OACC+B,EAAQC,OAAOjC,IACnC,CACE2M,KAAM3K,EAAQY,KACdgK,KAAM5K,EAAQC,OAAOpC,YAGZgN,iBAAiB,QAAS,SAAAhM,GACrCoJ,EAAKrF,QAAQ+B,SAAS3E,EAAQ7B,MAC9B4J,OAAO+C,+FAMK,IAAAC,EAAA9L,KAClB,iBAAkB8I,QAAU2C,aAAaM,oBACzCC,GACI7E,GAAYnH,KAAMiM,KAAKC,MAAMF,KAC7BG,MAAM,iDAAkD,CACtDC,OAAQ,OACRV,KAAMO,KAAKI,UAAU,CAAEC,KAAMC,OAE5BrE,KAAK,SAAAsE,GAAG,OAAIA,EAAIC,SAChBvE,KAAK,SAAA7J,GACJA,EAAKqO,QAAUA,IACf5D,OAAO6D,aAAaC,QAAQ,eAAgBX,KAAKI,UAAUhO,IAC3DyK,OAAO+D,QAAQC,aAAa,KAAM,KAAMhE,OAAOiE,SAASC,UACxD7F,GAAY2E,EAAMzN,sCAInB,IAAA4O,EAQHjN,KAAKN,MANPrB,EAFK4O,EAEL5O,KACAa,EAHK+N,EAGL/N,KACAiD,EAJK8K,EAIL9K,SACAQ,EALKsK,EAKLtK,OACAmD,EANKmH,EAMLnH,YACAC,EAPKkH,EAOLlH,aAPKmH,EASiDlN,KAAK2D,QAArD0F,EATD6D,EASC7D,WAAYlK,EATb+N,EASa/N,YAAawK,EAT1BuD,EAS0BvD,mBAEjC,OACErL,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,SAAO2O,YAAWrH,GAChBxH,EAAAC,EAAAC,cAAC4O,EAAD,CAAY/O,KAAMA,IAClBC,EAAAC,EAAAC,cAAC6O,EAAD,CACEhP,KAAMA,EACNyG,MAAOzG,EAAKyG,MACZ3C,SAAUA,EACVQ,OAAQA,EACRvD,QAASF,EACTyE,QAAS3D,KAAK2D,UAEftF,EAAKU,IAAMT,EAAAC,EAAAC,cAAC8O,EAAD,CAAgBlH,OAAQiD,KAEtC/K,EAAAC,EAAAC,cAAA,eACEF,EAAAC,EAAAC,cAAC+O,EAAD,CAAY7N,MAAOM,KAAKN,MAAOiE,QAAS3D,KAAK2D,UAC5CzE,EAAKH,GACJT,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAAA,YACEF,EAAAC,EAAAC,cAACgP,EAAD,CACEnP,KAAMA,EACN8D,SAAUA,EAASjD,EAAKH,IACxBI,YAAaA,IAEfb,EAAAC,EAAAC,cAACiP,EAAD,CAAiB9K,OAAQA,EAAOzD,EAAKH,MACrCT,EAAAC,EAAAC,cAACkP,EAAD,CAAmBhO,MAAOM,KAAKN,MAAOiE,QAAS3D,KAAK2D,WAErDoC,GACCzH,EAAAC,EAAAC,cAACmP,EAAD,CACEzO,KAAMA,EACNE,QAASf,EAAKU,GACdI,YAAaA,EACbE,WAAYsK,KAIhBtL,EAAKU,GACPT,EAAAC,EAAAC,cAACoP,GAAD,MAEAtP,EAAAC,EAAAC,cAACqP,GAAD,eAzQOjN,IAAMC,WAqRzBiI,OAAO6D,aAAamB,QAAQ,kBACzBhF,OAAO6D,aAAamB,QAAQ,gBAAgBnI,MAAM+G,MACnD5D,OAAO6D,aAAaoB,QAEtB,IAQQC,GAPFzB,GADS,IAAI0B,gBAAgBnF,OAAOiE,SAASmB,OAAOtL,MAAM,IACxCuL,IAAI,QACtBnC,GAAelD,OAAO6D,aAAamB,QAAQ,gBAUhD9B,IAAiBO,GAEd6B,IAASC,OAAO/P,EAAAC,EAAAC,cAAC8P,GAAD,MAAUlD,SAASC,cAAc,WAN7C2C,GAAQ,GAAAhP,OADC,4CACD,iBAAAA,OAA4B8J,OAAOiE,SAAStM,KAAKsK,MAAM,KAAK,IAC1EjC,OAAOiE,SAAP,GAAA/N,OAHY,2CAGZ,gCAAAA,OAJe,uBAIf,kBAAAA,OAA8EgP","file":"static/js/main.405cb73f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserList_component__3w2Rd\",\"hint\":\"UserList_hint__1YEd_\",\"online\":\"UserList_online__2qA0v\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"MessageList_component__3DerF\",\"empty\":\"MessageList_empty__1EOZq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"Message_component__302p2\",\"online\":\"Message_online__1b2Qf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"FileInput_container__Kjwp6\",\"component\":\"FileInput_component__JyAmX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"UserHeader_component__15itJ\",\"pulse\":\"UserHeader_pulse__3tPd1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateMessageForm_component__1qc9a\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomList_component__1DaB9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"RoomHeader_component__2lIDf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CreateRoomForm_component__u8tnm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"WelcomeScreen_component__3am1d\",\"pulse\":\"WelcomeScreen_pulse__1Wy-6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"JoinRoomScreen_component__22LpB\",\"pulse\":\"JoinRoomScreen_pulse__OjZzP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"TypingIndicator_component__7a4-P\",\"dots\":\"TypingIndicator_dots__1p2MO\",\"ball-beat\":\"TypingIndicator_ball-beat__2Vze9\"};","import React from 'react'\nimport style from './index.module.css'\n\nconst placeholder =\n  'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7'\n\nexport const UserHeader = ({ user = {} }) => (\n  <header className={style.component}>\n    <img src={user.avatarURL || placeholder} alt={user.name} />\n    <div>\n      <h3>{user.name}</h3>\n      <h5>{user.id && `@${user.id}`}</h5>\n    </div>\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const UserList = ({ room, current, createConvo, removeUser }) => (\n  <ul className={style.component}>\n    {room.users.map(user => (\n      <li\n        key={user.id}\n        className={user.presence.state === 'online' ? style.online : null}\n        onClick={e => createConvo({ user })}\n        style={{ order: user.presence.state === 'online' && -1 }}\n      >\n        <img src={user.avatarURL} alt={user.name} />\n        <p>{user.name}</p>\n      </li>\n    ))}\n    {\n      room.users.length < 5 ? (\n        <li className={style.hint} >\n          <div>\n            Type <span>/invite &lt;username&gt;</span> to invite\n        </div>\n        </li>\n      ) : null\n    }\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\nimport Linkify from 'react-linkify'\n\nconst time = string => {\n  const date = new Date(string)\n  const minutes = date.getMinutes()\n  return `${date.getHours()}:${minutes < 10 ? '0' + minutes : minutes}`\n}\n\nclass Attachment extends React.Component {\n  componentDidMount() {\n    if (this.props.link) this.setState({ src: this.props.link });\n  }\n  render() {\n    return this.state\n      ? {\n          image: (\n            <img controls={true} src={this.state.src} alt={this.state.name} />\n          ),\n          video: <video controls={true} src={this.state.src} />,\n          audio: <audio controls={true} src={this.state.src} />,\n          file: (\n            <a href={this.state.src} download>\n              Download File\n            </a>\n          ),\n        }[this.props.type]\n      : null\n  }\n}\n\nexport const Message = ({ user, createConvo }) => message =>\n  message.sender ? (\n    <li key={message.id} className={style.component}>\n      <img\n        onClick={e => createConvo({ user: message.sender })}\n        src={message.sender.avatarURL}\n        alt={message.sender.name}\n      />\n      <div>\n        <span\n          className={\n            message.sender.id === user.id ||\n            (message.sender.presence &&\n              message.sender.presence.state === 'online')\n              ? style.online\n              : null\n          }\n        >{`${message.sender.name} | ${time(message.createdAt)}`}</span>\n        <p>\n          <Linkify properties={{ target: '_blank' }}>{message.text}</Linkify>\n        </p>\n        {message.attachment ? (\n          <Attachment\n            user={user}\n            link={message.attachment.link}\n            type={message.attachment.type}\n          />\n        ) : null}\n      </div>\n    </li>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { Message } from '../Message'\n\nconst emptyList = (\n  <div className={style.empty}>\n    <span role=\"img\" aria-label=\"post\">\n      📝\n    </span>\n    <h2>No Messages Yet</h2>\n    <p>Be the first to post in this room or invite someone to join the room</p>\n  </div>\n)\n\nexport const MessageList = ({ messages = {}, user, createConvo }) => (\n  <ul id=\"messages\" className={style.component}>\n    {Object.keys(messages).length > 0 ? (\n      <wrapper->\n        {Object.keys(messages)\n          .reverse()\n          .map(k => Message({ user, createConvo })(messages[k]))}\n      </wrapper->\n    ) : (\n      emptyList\n    )}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nconst dots = (\n  <div className={style.dots}>\n    {[0, 1, 2].map(x => (\n      <div key={x} />\n    ))}\n  </div>\n)\n\nexport const TypingIndicator = ({ typing = {} }) =>\n  Object.keys(typing).length ? (\n    <div className={style.component}>\n      <div>{dots}</div>\n      <div>{`${Object.keys(typing)\n        .slice(0, 2)\n        .join(' and ')} is typing`}</div>\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const FileInput = ({ state: { user, message, room } }) =>\n  room.id ? (\n    <div className={style.container}>\n      <svg>\n        <use xlinkHref=\"index.svg#attach\" />\n      </svg>\n      <input\n        className={style.component}\n        type=\"file\"\n        onChange={e => {\n          const file = e.target.files[0]\n          file &&\n            user.sendMessage({\n              text: message || file.name,\n              roomId: room.id,\n              attachment: {\n                name: file.name.replace(/[^A-Za-z0-9._-]/g, '--'),\n                file,\n              },\n            })\n        }}\n      />\n    </div>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { FileInput } from '../FileInput'\n\nexport const CreateMessageForm = ({\n  state: { user = {}, room = {}, message = '' },\n  actions: { runCommand },\n}) =>\n  room.id ? (\n    <form\n      className={style.component}\n      onSubmit={e => {\n        e.preventDefault()\n\n        const message = e.target[0].value.trim()\n\n        if (message.length === 0) {\n          return\n        }\n\n        e.target[0].value = ''\n\n        message.startsWith('/')\n          ? runCommand(message.slice(1))\n          : user.sendMessage({\n              text: message,\n              roomId: room.id,\n            })\n      }}\n    >\n      <input\n        placeholder=\"Type a Message..\"\n        onInput={e => user.isTypingIn({ roomId: room.id })}\n      />\n      <FileInput state={{ user, room, message }} />\n      <button type=\"submit\">\n        <svg>\n          <use xlinkHref=\"index.svg#send\" />\n        </svg>\n      </button>\n    </form>\n  ) : null\n","import React from 'react'\nimport style from './index.module.css'\nimport { dots } from '../TypingIndicator/index.module.css'\n\nconst Icon = id => (\n  <svg>\n    <use xlinkHref={`index.svg#${id}`} />\n  </svg>\n)\n\nconst unreads = (user, room, messages = {}) => {\n  const read = user.readCursor({ roomId: room.id })\n  return (\n    (read && Object.keys(messages).filter(x => x > read.position).length) ||\n    undefined\n  )\n}\n\nconst priority = (user, room, messages = {}) => {\n  const unreadMessages = unreads(user, room, messages) || 0\n  const lastMessage = Object.keys(messages).pop() || 0\n  return (10 * unreadMessages + parseInt(lastMessage)) * -1\n}\n\nexport const RoomList = ({\n  rooms = [],\n  user,\n  messages,\n  current,\n  typing,\n  actions,\n}) => (\n  <ul className={style.component}>\n    {rooms.map(room => {\n      const messageKeys = Object.keys(messages[room.id] || {})\n      const latestMessage =\n        messageKeys.length > 0 && messages[room.id][messageKeys.pop()]\n      const firstUser = room.users.find(x => x.id !== user.id)\n      const order = priority(user, room, messages[room.id])\n      const unreadCount = unreads(user, room, messages[room.id])\n      return (\n        <li\n          key={room.id}\n          disabled={room.id === current.id}\n          onClick={e => actions.joinRoom(room)}\n          style={{ order }}\n        >\n          {room.name.match(user.id) && firstUser ? (\n            <img src={firstUser.avatarURL} alt={firstUser.id} />\n          ) : (\n            Icon(room.isPrivate ? 'lock' : 'public')\n          )}\n          <col->\n            <p>{room.name.replace(user.id, '')}</p>\n            <span>{latestMessage && latestMessage.text}</span>\n          </col->\n          {room.id !== current.id && unreadCount ? (\n            <label>{unreadCount}</label>\n          ) : Object.keys(typing[room.id] || {}).length > 0 ? (\n            <div className={dots}>\n              {[0, 1, 2].map(x => (\n                <div key={x} />\n              ))}\n            </div>\n          ) : null}\n        </li>\n      )\n    })}\n  </ul>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const RoomHeader = ({\n  state: { room, user, sidebarOpen, userListOpen },\n  actions: { setSidebar, setUserList },\n}) => (\n  <header className={style.component}>\n    <button onClick={e => setSidebar(!sidebarOpen)}>\n      <svg>\n        <use xlinkHref=\"index.svg#menu\" />\n      </svg>\n    </button>\n    <h1>{room.name && room.name.replace(user.id, '')}</h1>\n    {room.users && (\n      <div onClick={e => setUserList(!userListOpen)}>\n        <span>{room.users.length}</span>\n        <svg>\n          <use xlinkHref=\"index.svg#members\" />\n        </svg>\n      </div>\n    )}\n  </header>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const CreateRoomForm = ({ submit }) => (\n  <form\n    className={style.component}\n    onSubmit={e => {\n      e.preventDefault()\n      submit({\n        name: e.target[0].value,\n        private: e.target.elements[2].checked,\n      })\n      e.target[0].value = ''\n    }}\n  >\n    <input placeholder=\"Create a Room\" type=\"text\" required />\n    <button>\n      <input type=\"checkbox\" />\n      <svg>\n        <use xlinkHref=\"index.svg#lock\" />\n      </svg>\n    </button>\n    <button type=\"submit\">\n      <svg>\n        <use xlinkHref=\"index.svg#add\" />\n      </svg>\n    </button>\n  </form>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const WelcomeScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Authenticating, subscribing to rooms\n        <br />\n        and fetching messages.\n      </p>\n    </div>\n  </section>\n)\n","import React from 'react'\nimport style from './index.module.css'\n\nexport const JoinRoomScreen = () => (\n  <section>\n    <div className={style.component}>\n      <span role=\"img\" aria-label=\"post\">\n        <svg viewBox=\"0 0 59 80\">\n          <g>\n            <path d=\"M48.417 49.444L38.585 73.229 36.012 71.394 41.802 56.726 31.211 59.519C31.211 59.519 26.022 42.42 26.513 30.837 26.218 22.744 27.644 16.96 30.167 13.6 34.274 8.408 42.099 3.953 49.793 7.645 54.701 9.869 57.658 13.889 58.107 17.824 59.479 34.859 38.498 41.817 38.498 41.817L38.085 38.191C38.085 38.191 44.945 35.464 49.105 29.553 53.266 23.643 51.245 15.88 46.569 14.464 42.061 13.577 37.34 18.757 36.516 27.966 34.721 41.776 39.393 52.006 39.393 52.006L48.417 49.444M0 62.396L15.402 74.372 16.522 71.783 8.26 65.71 16.853 63.305C16.853 63.305 10.998 47.535 10.597 32.251 10.229 27.354 9.896 11.684 15.924 8.975 16.976 7.213 18.743 5.903 18.743 5.903 18.743 5.903 3.467 4.584 4.184 32.453 5.706 51.166 9.451 59.821 9.451 59.821L0 62.396\" />\n            <path d=\"M29.91,61.761 L38.969,59.263 L30.045,80 L11.998,66.538 L19.098,64.644 C19.098,64.644 3.276,20.694 21.128,5.095 C32.325,-3.789 43.164,3.999 42.965,4.872 C40.203,4.812 37.842,5.844 37.842,5.844 C37.842,5.844 31.789,3.265 27.475,12.503 C23.719,20.705 22.048,34.474 29.91,61.761\" />\n            <path d=\"M41.806,17.606 C42.599,24.356 38.244,27.206 38.244,27.206 L37.819,30.659 C37.819,30.659 47.709,25.549 45.669,15.819 C44.566,15.913 42.212,17.242 41.806,17.606\" />\n          </g>\n        </svg>\n      </span>\n      <p>\n        Join a room, create a room or click on a user avatar and start a\n        conversation.\n      </p>\n    </div>\n  </section>\n)\n","import Chatkit from '@pusher/chatkit-client'\n\nconst credentials = {\n  url: (id, token) =>\n    `https://chatkit-demo-server.herokuapp.com/token?user=${id}&token=${token}`,\n  instanceLocator: 'v1:us1:05f46048-3763-4482-9cfe-51ff327c3f29',\n}\n\nconst { instanceLocator, url } = credentials\nexport default ({ state, actions }, { id, token }) =>\n  new Chatkit.ChatManager({\n    tokenProvider: new Chatkit.TokenProvider({ url: url(id, token) }),\n    instanceLocator,\n    userId: id,\n  })\n    .connect({\n      onUserStartedTyping: actions.isTyping,\n      onUserStoppedTyping: actions.notTyping,\n      onAddedToRoom: actions.subscribeToRoom,\n      onRemovedFromRoom: actions.removeRoom,\n      onPresenceChanged: actions.setUserPresence,\n    })\n    .then(user => {\n      // Subscribe to all rooms the user is a member of\n      Promise.all(\n        user.rooms.map(room =>\n          user.subscribeToRoom({\n            roomId: room.id,\n            hooks: { onMessage: actions.addMessage },\n          })\n        )\n      ).then(rooms => {\n        actions.setUser(user)\n        // Join the first room in the users room list\n        user.rooms.length > 0 && actions.joinRoom(user.rooms[0])\n      })\n    })\n    .catch(error => console.log('Error on connection', error))\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { version } from '../package.json'\nimport './index.css'\n\nimport { UserHeader } from './components/UserHeader'\nimport { UserList } from './components/UserList'\nimport { MessageList } from './components/MessageList'\nimport { TypingIndicator } from './components/TypingIndicator'\nimport { CreateMessageForm } from './components/CreateMessageForm'\nimport { RoomList } from './components/RoomList'\nimport { RoomHeader } from './components/RoomHeader'\nimport { CreateRoomForm } from './components/CreateRoomForm'\nimport { WelcomeScreen } from './components/WelcomeScreen'\nimport { JoinRoomScreen } from './components/JoinRoomScreen'\n\nimport ChatManager from './chatkit'\n\n// --------------------------------------\n// Application\n// --------------------------------------\n\nclass View extends React.Component {\n  state = {\n    user: {},\n    room: {},\n    messages: {},\n    typing: {},\n    sidebarOpen: false,\n    userListOpen: window.innerWidth > 1000,\n  }\n\n  actions = {\n    // --------------------------------------\n    // UI\n    // --------------------------------------\n\n    setSidebar: sidebarOpen => this.setState({ sidebarOpen }),\n    setUserList: userListOpen => this.setState({ userListOpen }),\n\n    // --------------------------------------\n    // User\n    // --------------------------------------\n\n    setUser: user => this.setState({ user }),\n\n    // --------------------------------------\n    // Room\n    // --------------------------------------\n\n    setRoom: room => {\n      this.setState({ room, sidebarOpen: false })\n      this.actions.scrollToEnd()\n    },\n\n    removeRoom: room => this.setState({ room: {} }),\n\n    joinRoom: room => {\n      this.actions.setRoom(room)\n      this.actions.subscribeToRoom(room)\n      this.state.messages[room.id] &&\n        this.actions.setCursor(\n          room.id,\n          Object.keys(this.state.messages[room.id]).pop()\n        )\n    },\n\n    subscribeToRoom: room =>\n      !this.state.user.roomSubscriptions[room.id] &&\n      this.state.user.subscribeToRoom({\n        roomId: room.id,\n        hooks: { onMessage: this.actions.addMessage },\n      }),\n\n    createRoom: options =>\n      this.state.user.createRoom(options).then(this.actions.joinRoom),\n\n    createConvo: options => {\n      if (options.user.id !== this.state.user.id) {\n        const exists = this.state.user.rooms.find(\n          x =>\n            x.name === options.user.id + this.state.user.id ||\n            x.name === this.state.user.id + options.user.id\n        )\n        exists\n          ? this.actions.joinRoom(exists)\n          : this.actions.createRoom({\n              name: this.state.user.id + options.user.id,\n              addUserIds: [options.user.id],\n              private: true,\n            })\n      }\n    },\n\n    addUserToRoom: ({ userId, roomId = this.state.room.id }) =>\n      this.state.user\n        .addUserToRoom({ userId, roomId })\n        .then(this.actions.setRoom),\n\n    removeUserFromRoom: ({ userId, roomId = this.state.room.id }) =>\n      userId === this.state.user.id\n        ? this.state.user.leaveRoom({ roomId })\n        : this.state.user\n            .removeUserFromRoom({ userId, roomId })\n            .then(this.actions.setRoom),\n\n    // --------------------------------------\n    // Cursors\n    // --------------------------------------\n\n    setCursor: (roomId, position) =>\n      this.state.user\n        .setReadCursor({ roomId, position: parseInt(position) })\n        .then(x => this.forceUpdate()),\n\n    // --------------------------------------\n    // Messages\n    // --------------------------------------\n\n    addMessage: payload => {\n      const roomId = payload.room.id\n      const messageId = payload.id\n      // Update local message cache with new message\n      this.setState(prevState => ({\n        messages: {\n          ...prevState.messages,\n          [roomId]: {\n            ...prevState.messages[roomId],\n            [messageId]: payload\n          }\n        }\n      }))\n      // Update cursor if the message was read\n      if (roomId === this.state.room.id) {\n        const cursor = this.state.user.readCursor({ roomId }) || {}\n        const cursorPosition = cursor.position || 0\n        cursorPosition < messageId && this.actions.setCursor(roomId, messageId)\n        this.actions.scrollToEnd()\n      }\n      // Send notification\n      this.actions.showNotification(payload)\n    },\n\n    runCommand: command => {\n      const commands = {\n        invite: ([userId]) => this.actions.addUserToRoom({ userId }),\n        remove: ([userId]) => this.actions.removeUserFromRoom({ userId }),\n        leave: ([userId]) =>\n          this.actions.removeUserFromRoom({ userId: this.state.user.id }),\n      }\n      const name = command.split(' ')[0]\n      const args = command.split(' ').slice(1)\n      const exec = commands[name]\n      exec && exec(args).catch(console.log)\n    },\n\n    scrollToEnd: e =>\n      setTimeout(() => {\n        const elem = document.querySelector('#messages')\n        elem && (elem.scrollTop = 100000)\n      }, 0),\n\n    // --------------------------------------\n    // Typing Indicators\n    // --------------------------------------\n\n    isTyping: (room, user) =>\n      this.setState(prevState => ({\n        typing: {\n          ...prevState.typing,\n          [room.id]: {\n            ...prevState.typing[room.id],\n            [user.id]: true\n          }\n        }\n      })),\n\n    notTyping: (room, user) =>\n      this.setState(prevState => ({\n        typing: {\n          ...prevState.typing,\n          [room.id]: {\n            ...prevState.typing[room.id],\n            [user.id]: false\n          }\n        }\n      })),\n\n    // --------------------------------------\n    // Presence\n    // --------------------------------------\n\n    setUserPresence: () => this.forceUpdate(),\n\n    // --------------------------------------\n    // Notifications\n    // --------------------------------------\n\n    showNotification: message => {\n      if (\n        'Notification' in window &&\n        this.state.user.id &&\n        this.state.user.id !== message.senderId &&\n        document.visibilityState === 'hidden'\n      ) {\n        const notification = new Notification(\n          `New Message from ${message.sender.id}`,\n          {\n            body: message.text,\n            icon: message.sender.avatarURL,\n          }\n        )\n        notification.addEventListener('click', e => {\n          this.actions.joinRoom(message.room)\n          window.focus()\n        })\n      }\n    },\n  }\n\n  componentDidMount() {\n    'Notification' in window && Notification.requestPermission()\n    existingUser\n      ? ChatManager(this, JSON.parse(existingUser))\n      : fetch('https://chatkit-demo-server.herokuapp.com/auth', {\n          method: 'POST',\n          body: JSON.stringify({ code: authCode }),\n        })\n          .then(res => res.json())\n          .then(user => {\n            user.version = version\n            window.localStorage.setItem('chatkit-user', JSON.stringify(user))\n            window.history.replaceState(null, null, window.location.pathname)\n            ChatManager(this, user)\n          })\n  }\n\n  render() {\n    const {\n      user,\n      room,\n      messages,\n      typing,\n      sidebarOpen,\n      userListOpen,\n    } = this.state\n    const { createRoom, createConvo, removeUserFromRoom } = this.actions\n\n    return (\n      <main>\n        <aside data-open={sidebarOpen}>\n          <UserHeader user={user} />\n          <RoomList\n            user={user}\n            rooms={user.rooms}\n            messages={messages}\n            typing={typing}\n            current={room}\n            actions={this.actions}\n          />\n          {user.id && <CreateRoomForm submit={createRoom} />}\n        </aside>\n        <section>\n          <RoomHeader state={this.state} actions={this.actions} />\n          {room.id ? (\n            <row->\n              <col->\n                <MessageList\n                  user={user}\n                  messages={messages[room.id]}\n                  createConvo={createConvo}\n                />\n                <TypingIndicator typing={typing[room.id]} />\n                <CreateMessageForm state={this.state} actions={this.actions} />\n              </col->\n              {userListOpen && (\n                <UserList\n                  room={room}\n                  current={user.id}\n                  createConvo={createConvo}\n                  removeUser={removeUserFromRoom}\n                />\n              )}\n            </row->\n          ) : user.id ? (\n            <JoinRoomScreen />\n          ) : (\n            <WelcomeScreen />\n          )}\n        </section>\n      </main>\n    )\n  }\n}\n\n// --------------------------------------\n// Authentication\n// --------------------------------------\n\nwindow.localStorage.getItem('chatkit-user') &&\n  !window.localStorage.getItem('chatkit-user').match(version) &&\n  window.localStorage.clear()\n\nconst params = new URLSearchParams(window.location.search.slice(1))\nconst authCode = params.get('code')\nconst existingUser = window.localStorage.getItem('chatkit-user')\n\nconst githubAuthRedirect = () => {\n  const client = '20cdd317000f92af12fe'\n  const url = 'https://github.com/login/oauth/authorize'\n  const server = 'https://chatkit-demo-server.herokuapp.com'\n  const redirect = `${server}/success?url=${window.location.href.split('?')[0]}`\n  window.location = `${url}?scope=user:email&client_id=${client}&redirect_uri=${redirect}`\n}\n\n!existingUser && !authCode\n  ? githubAuthRedirect()\n  : ReactDOM.render(<View />, document.querySelector('#root'))\n"],"sourceRoot":""}